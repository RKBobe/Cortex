<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Context Chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container-fluid d-flex flex-column vh-100 p-3">
        <header class="text-center mb-3">
            <div class="mx-auto" style="max-width: 400px;">
                <input type="text" id="user-id-input" class="form-control form-control-lg text-center" placeholder="Enter Your User ID" required>
            </div>
            <div id="status-message" class="text-muted small mt-2"></div>
        </header>

        <div class="accordion mb-3" id="ingestionAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        Ingest Content
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#ingestionAccordion">
                    <div class="accordion-body">
                        <form id="upload-form" class="mb-3">
                            <label class="form-label">Upload a file</label>
                            <div class="input-group">
                                <input type="file" class="form-control" id="file-input" required>
                                <button class="btn btn-outline-secondary" type="submit">Upload to Current Topic</button>
                            </div>
                        </form>
                        <form id="repo-form">
                            <label class="form-label">Ingest a public GitHub repository</label>
                            <div class="input-group">
                                <input type="url" id="repo-url-input" class="form-control" placeholder="https://github.com/user/repo" required>
                                <button class="btn btn-outline-secondary" type="submit">Ingest Repo to Current Topic</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div id="chat-window" class="flex-grow-1 p-3 mb-3 border rounded overflow-auto"></div>
        
        <form id="chat-form" class="d-flex flex-column">
            <div class="mb-2">
                <input type="text" id="topic-input" class="form-control" placeholder="Enter topic" required>
            </div>
            <div class="input-group">
                <textarea id="prompt-input" class="form-control" placeholder="Type your message..." required rows="1"></textarea>
                <button type="submit" id="send-button" class="btn btn-primary">Send</button>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/main.js"></script>
</body>
</html>